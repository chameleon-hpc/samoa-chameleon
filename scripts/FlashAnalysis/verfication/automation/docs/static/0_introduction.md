# Comparing the numerical results in _[Vater S., N. Beisiegel, and J. Behrens, 2019]_ to results produced by the FLASH implementation in Samoa2

Contact: Christoph Honal (christoph.honal@tum.de), Leonhard Rannabauer (rannabau@in.tum.de)

This document was auto-generated. REVISION

## Included scenarios

 - [4.1: Lake at rest](1_resting_lake/resting_lake.md)
 - [4.2: Tsunami runup onto a linearly sloping beach](2_linear_beach/linear_beach.md)
 - [4.3: Long wave resonance in a paraboloid basin](3_longwave_basin/longwave_basin.md)
 - [4.4: Oscillatory flow in a parabolic bowl](4_oscillating_lake/oscillating_lake.md)
 - [4.5: Runup onto a complex three-dimensional beach](5_okushiri/okushiri.md)
 - [4.6: Flow around a conical island](6_conical_island/conical_island.md)

## Verification method

Samoa was built using the `flash-testing` branch of the repository available at https://gitlab.lrz.de/samoa/samoa, with the XDMF module enabled.

Evaluation and post-processing was done using the scripts available at `scripts/FlashAnalysis/verification` and `scripts/XDMF/pysamoaxdmf` in the Samoa repository. The `pysamoaxdmf` module provides a convenient python3 wrapper to parse the XDMF/HDF5 data generated by Samoa.

Each scenario directory contains at least a description file and a `simulation_data` directory containing gzipped XDMF data of the simulations evaluated. When applicable, the simulation data is stripped down to only contain relevant data, these changes are detailed in the respective description file.

The scenarios were reproduced as close as possible, however some adjustments had to be made due to differences in the way of computation in Samoa. These adjustments are detailed in their respective scenario description files.

The implementation of the scenarios can be found at `src/Flash/FLASH_Scenario.f90`.

All XDMF files may be read and rendered using the ParaView software, by selecting the "Xdmf3" reader on import.

## Compilation notes

The `xdmf_fox_dir`, `xdmf_hdf5_dir`, `asagi_dir`, `netcdf_dir`, `exe`, `compiler` and `mpi` configuration options are not detailed here, as they differ from machine to machine. The other compilation options, with the exception of `swe_scenario`, are as follows:
 - `scenario='flash'`
 - `flash_order='1'`
 - `target='release'`
 - `data_refinement='sample'`
 - `xdmf='true'`

Furthermore, each test is performed two times, once for the vertex- and edge-based limiter respectively:
 - `limiter='BJ_vertex'`
 - `limiter='BJ_edge'`

Some scenarios may require ASAGI with `asagi='true'`, and/or time-dependent boundary conditions using `boundary='file'` or `boundary='function'`.

## Evaluation notes

Is is assumed that the working directory is `scripts/FlashAnalysis/verification`, the `PYTHONPATH` environment variable contains `scripts/XDMF/pysamoaxdmf` and the simulation data is located at `output/`.

If not specified otherwise, the evaluation script parameters are as follows:
 - `-i "path/to/xmf_file.xmf"`: Relative or absolute file path of the XMF output file. `find` is used to generate time-independent commands.
 - `-o "path/to/output_directory"`: Relative or absolute file path of the SVG plot output directory
 - `-d "path/to/data_directory"`: Relative or absolute path to directory containing reference data
 - `-s "scenario"`: Script-specific scenario selector, see individual documentation
 - `-n workers`: Amount of parallel processes used for computation

## Editor's note

"`[1]`" is used to denote a reference to the paper, even when no bibliography is provided in the document.

The `markdown-folder-to-html` npm package was used to compile these markdown files to HTML, and `pandoc` with `latex` was used for PDF generation.